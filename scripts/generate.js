const fs = require("fs");
const path = require("path");

function getRandomFrom(file) {
  try {
    const data = JSON.parse(fs.readFileSync(path.join(__dirname, "..", "data", file)));
    return data[Math.floor(Math.random() * data.length)];
  } catch (error) {
    console.error(`❌ Error reading ${file}:`, error.message);
    return "Oops! Could not load content.";
  }
}

const quote = getRandomFrom("quotes.json");
const tip = getRandomFrom("cybertips.json");
const challenge = getRandomFrom("challenges.json");

const content = `
<!-- AUTO-GENERATED BY FORTUNE NINJA 🧙‍♂️ -->

<p align="center">
  <img src="./img/yinnyang" />
</p>

<h1 align="center">🔮 Fortune Ninja – Daily Cyber Wisdom</h1>

---

### 📜 Quote of the Day
> "${quote}"

---

### 🛡️ Cyber Tip
${tip}

---

### 🧠 Challenge of the Day
${challenge}

---

⏳ Come back tomorrow for a fresh drop of digital wisdom.
`;

fs.writeFileSync("README.md", content);
