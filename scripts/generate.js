const fs = require("fs");
const path = require("path");

// Helper to get random value from JSON file
function getRandomFrom(file) {
  const data = JSON.parse(
    fs.readFileSync(path.join(__dirname, "..", "data", file))
  );
  return data[Math.floor(Math.random() * data.length)];
}

// Load fortune data
const quote = getRandomFrom("quotes.json");
const tip = getRandomFrom("cybertips.json");
const challenge = getRandomFrom("challenges.json");

// Timestamp to force a change each run
const timestamp = new Date().toLocaleString("en-IN", {
  timeZone: "Asia/Kolkata",
});

// README content
const content = `
<!-- AUTO-GENERATED BY FORTUNE NINJA üßô‚Äç‚ôÇÔ∏è -->

![yin-yang](./img/yinnyang.gif)

## üîÆ Fortune Ninja (Daily Drop)

\`\`\`bash
üìú Quote of the Day:
"${quotes}"

üõ°Ô∏è Cyber Tip:
${cybertip}

üß† Challenge of the Day:
${challenges}
\`\`\`

> üßô‚Äç‚ôÇÔ∏è Stay sharp, warrior. Return tomorrow for your next fortune.

üïí Last updated: ${timestamp}
`;

fs.writeFileSync("README.md", content);
