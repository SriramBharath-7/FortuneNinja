const fs = require("fs");
const path = require("path");

function getRandomFrom(file) {
  try {
    const data = JSON.parse(fs.readFileSync(path.join(__dirname, "..", "data", file)));
    return data[Math.floor(Math.random() * data.length)];
  } catch (error) {
    console.error(`‚ùå Error reading ${file}:`, error.message);
    return "Oops! Could not load content.";
  }
}

const quote = getRandomFrom("quotes.json");
const tip = getRandomFrom("cybertips.json");
const challenge = getRandomFrom("challenges.json");

const gifBanner = `
<p align="center">
  <img src="./img/yinnyang.gif" width="150" alt="Yin Yang" />
</p>
`;

const content = `
<!-- AUTO-GENERATED BY FORTUNE NINJA üßô‚Äç‚ôÇÔ∏è -->
${gifBanner}
## üîÆ Fortune Ninja (Daily Drop)

\`\`\`bash
üìú Quote of the Day:
"${quote}"

üõ°Ô∏è Cyber Tip:
${tip}

üß† Challenge of the Day:
${challenge}
\`\`\`

> üßô Stay sharp, return tomorrow for your next fortune.
`;
